import{u as k,a as z,j as e,H as f,r as m,y as a}from"./app-kKseVrtb.js";function w({cart:s,subtotal:b,tax:j,total:p}){const{data:o,setData:d,post:v,processing:l,errors:h}=k({payment_method:"card",card_number:"",card_expiry_month:"",card_expiry_year:"",card_cvv:"",notes:""}),[n,c]=z.useState(""),x=(r,t)=>{if(!r||!t)return c(""),!0;const i=new Date,g=i.getFullYear(),C=i.getMonth()+1,y=parseInt(t),S=parseInt(r);return y<g||y===g&&S<C?(c("La fecha de expiración no puede ser anterior a la fecha actual"),!1):(c(""),!0)},u=(r,t)=>{r==="month"?(d("card_expiry_month",t),x(t,o.card_expiry_year)):(d("card_expiry_year",t),x(o.card_expiry_month,t))},_=r=>{if(r.preventDefault(),!x(o.card_expiry_month,o.card_expiry_year)){a.error("Por favor corrige la fecha de expiración");return}v(route("order.store"),{onSuccess:()=>{a.success("Orden creada exitosamente")},onError:t=>{t.order?a.error(t.order):t.auth?a.error(t.auth):a.error("Error al crear la orden")}})};return!s||!s.items||s.items.length===0?e.jsxs("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif"},children:[e.jsx(f,{title:"Checkout"}),e.jsx("h1",{children:"Checkout - Testing"}),e.jsx("p",{children:"El carrito está vacío"}),e.jsx("button",{onClick:()=>m.visit(route("menu.index")),style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",cursor:"pointer",marginTop:"10px"},children:"Ir al Menú"})]}):e.jsxs("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif"},children:[e.jsx(f,{title:"Checkout"}),e.jsx("h1",{children:"Checkout - Testing"}),e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx("button",{onClick:()=>m.visit(route("cart.index")),style:{padding:"10px 20px",backgroundColor:"#6c757d",color:"white",border:"none",cursor:"pointer"},children:"Volver al Carrito"})}),e.jsxs("div",{style:{display:"flex",gap:"20px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("h2",{children:"Resumen del Pedido"}),s.items.map(r=>e.jsxs("div",{style:{border:"1px solid #ddd",padding:"10px",marginBottom:"10px",borderRadius:"5px"},children:[e.jsx("p",{children:e.jsx("strong",{children:r.product?.name||"Producto"})}),e.jsxs("p",{children:["Cantidad: ",r.quantity," x $",r.price," = $",(r.quantity*r.price).toFixed(2)]})]},r.id)),e.jsxs("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#f0f0f0",borderRadius:"5px"},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Subtotal:"})," $",b.toFixed(2)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"IVA (16%):"})," $",j.toFixed(2)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total:"})," $",p.toFixed(2)]})]})]}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid #e0e0e0"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:e.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#0070ba"},children:"PayPal"})}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#333"},children:["$",p.toFixed(2)," MXN"]})]}),e.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"10px",color:"#333"},children:"Pagar con tarjeta de débito o crédito"}),e.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"25px"},children:"No compartimos su información financiera con el vendedor."}),e.jsxs("form",{onSubmit:_,style:{maxWidth:"600px"},children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#333"},children:"Número de tarjeta"}),e.jsx("input",{type:"text",value:o.card_number,onChange:r=>d("card_number",r.target.value.replace(/\D/g,"").slice(0,16)),placeholder:"1234 5678 9012 3456",maxLength:"16",required:!0,style:{width:"100%",padding:"12px",border:"1px solid #d0d0d0",borderRadius:"4px",fontSize:"16px",backgroundColor:"#fff"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#333"},children:"Vencimiento"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("select",{value:o.card_expiry_month,onChange:r=>u("month",r.target.value),required:!0,style:{flex:1,padding:"12px",border:"1px solid #d0d0d0",borderRadius:"4px",fontSize:"16px",backgroundColor:"#fff"},children:[e.jsx("option",{value:"",children:"Mes"}),Array.from({length:12},(r,t)=>{const i=t+1;return e.jsx("option",{value:i.toString().padStart(2,"0"),children:i.toString().padStart(2,"0")},i)})]}),e.jsxs("select",{value:o.card_expiry_year,onChange:r=>u("year",r.target.value),required:!0,style:{flex:1,padding:"12px",border:"1px solid #d0d0d0",borderRadius:"4px",fontSize:"16px",backgroundColor:"#fff"},children:[e.jsx("option",{value:"",children:"Año"}),Array.from({length:15},(r,t)=>{const i=new Date().getFullYear()+t;return e.jsx("option",{value:i,children:i},i)})]})]}),n&&e.jsx("p",{style:{color:"#d93025",fontSize:"12px",marginTop:"5px"},children:n})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#333"},children:"CSC"}),e.jsx("input",{type:"text",value:o.card_cvv,onChange:r=>d("card_cvv",r.target.value.replace(/\D/g,"").slice(0,4)),placeholder:"123",maxLength:"4",required:!0,style:{width:"100%",padding:"12px",border:"1px solid #d0d0d0",borderRadius:"4px",fontSize:"16px",backgroundColor:"#fff"}})]})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#333"},children:"Notas adicionales (opcional)"}),e.jsx("textarea",{value:o.notes,onChange:r=>d("notes",r.target.value),style:{width:"100%",padding:"12px",border:"1px solid #d0d0d0",borderRadius:"4px",fontSize:"16px",minHeight:"80px",backgroundColor:"#fff",resize:"vertical"},placeholder:"Instrucciones especiales para tu pedido..."})]}),h.order&&e.jsx("div",{style:{color:"#d93025",marginBottom:"15px",padding:"10px",backgroundColor:"#fce8e6",borderRadius:"4px",fontSize:"14px"},children:h.order}),e.jsx("button",{type:"submit",disabled:l||!!n||!o.card_number||!o.card_expiry_month||!o.card_expiry_year||!o.card_cvv,style:{width:"100%",padding:"14px 30px",backgroundColor:l||n||!o.card_number||!o.card_expiry_month||!o.card_expiry_year||!o.card_cvv?"#ccc":"#0070ba",color:"white",border:"none",borderRadius:"4px",cursor:l||n||!o.card_number||!o.card_expiry_month||!o.card_expiry_year||!o.card_cvv?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold",marginTop:"10px"},children:l?"Procesando...":"Pagar ahora"})]})]})]})]})}export{w as default};
